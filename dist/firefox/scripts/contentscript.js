!function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function initContextMenu(){function hasProgramPartnershipAndDeeplink(value){currentPageHasProgramPartnershipAndDeeplink=value,value===!0?(document.getElementById("affilinet-webext-copy-codes-headline").classList.remove("affilinet-webext-hidden"),document.getElementById("affilinet-webext-copy-codes").classList.remove("affilinet-webext-hidden")):(document.getElementById("affilinet-webext-copy-codes-headline").classList.add("affilinet-webext-hidden"),document.getElementById("affilinet-webext-copy-codes").classList.add("affilinet-webext-hidden"))}function createHoverImageContainer(){var iconURL=_ext2["default"].extension.getURL("icons/icon-16.png"),hoverImageContainer=document.createElement("div");hoverImageContainer.id="affilinet-webext-imageHoverBtn";var img=document.createElement("img");return img.id="affilinet-webext-image",img.src=iconURL,hoverImageContainer.appendChild(img),hoverImageContainer}function createContextMenu(){var contextmenu=document.createElement("div");return contextmenu.id="affilinet-webext-contextmenu",contextmenu.innerHTML='<div class="affilinet-webext-row" style="margin-bottom:0 !important;"><img id="affilinet-webext-close" data-target="close" src="'+_ext2["default"].extension.getURL("images/fa-close.gif")+'"></div><div class="affilinet-webext-row"> <p>'+_ext2["default"].i18n.getMessage("context_shareOn")+'</p></div><div class="affilinet-webext-row"><img class="affilinet-webext-share" data-target="pinterest" src="'+_ext2["default"].extension.getURL("images/fa-pinterest.gif")+'"><img class="affilinet-webext-share" data-target="facebook" src="'+_ext2["default"].extension.getURL("images/fa-facebook.gif")+'"><img class="affilinet-webext-share" data-target="google" src="'+_ext2["default"].extension.getURL("images/fa-google.gif")+'"><img class="affilinet-webext-share" data-target="twitter" src="'+_ext2["default"].extension.getURL("images/fa-twitter-square.gif")+'"></div><div class="affilinet-webext-row"> <p>'+_ext2["default"].i18n.getMessage("context_likeList")+'</p></div><div class="affilinet-webext-row"><img class="affilinet-webext-save" data-target="image" src="'+_ext2["default"].extension.getURL("images/fa-camera.gif")+'"><img class="affilinet-webext-save" data-target="link" src="'+_ext2["default"].extension.getURL("images/fa-globe.gif")+'"></div><div class="affilinet-webext-row affilinet-webext-hidden" id="affilinet-webext-copy-codes-headline"> <p>'+_ext2["default"].i18n.getMessage("context_codes")+'</p></div><div class="affilinet-webext-row affilinet-webext-hidden" id="affilinet-webext-copy-codes"><img class="affilinet-webext-code" data-target="copyImageCode" src="'+_ext2["default"].extension.getURL("images/fa-code.gif")+'"><img class="affilinet-webext-deeplink" data-target="copyDeeplink" src="'+_ext2["default"].extension.getURL("images/fa-link.gif")+'"></div><div class="affilinet-webext-row"><div id="affilinet-webext-success-message" class="affilinet-webext-hidden"></div></div>',contextmenu}function openContextMenu(event){event.stopPropagation(),event.preventDefault(),contextMenu.style.display="block",document.addEventListener("click",closeContextMenu),contextMenuIsOpened=!0}function onContextMenuClick(event){if(event.stopPropagation(),event.preventDefault(),event.target.dataset.target)switch(event.target.dataset.target){case"close":closeContextMenu();break;case"image":saveImage();break;case"link":saveLink();break;case"copyDeeplink":copyDeeplink();break;case"copyImageCode":copyImageCode();break;case"pinterest":case"facebook":case"google":case"twitter":shareOn(event.target.dataset.target)}return!1}function copyDeeplink(){console.log("copy deeplink"),_ext2["default"].runtime.sendMessage({action:"copyDeeplink",data:getShareDetails()},function(response){showSuccessMessage(response,_ext2["default"].i18n.getMessage("context_messageDeeplinkCopied"))})}function copyImageCode(){console.log("copy image code"),_ext2["default"].runtime.sendMessage({action:"copyImageCode",data:getShareDetails()},function(response){showSuccessMessage(response,_ext2["default"].i18n.getMessage("context_messageImageCodeCopied"))})}function closeContextMenu(){contextMenuIsOpened&&(contextMenu.style.display="none",contextMenuIsOpened=!1,document.removeEventListener("click",closeContextMenu),document.getElementById("affilinet-webext-success-message").innerText="",document.getElementById("affilinet-webext-success-message").classList.add("affilinet-webext-hidden"))}function shareOn(socialNetworkName){_ext2["default"].runtime.sendMessage({action:"share-on-"+socialNetworkName,data:getShareDetails()}),closeContextMenu()}function saveImage(){var details=getShareDetails();details.type="image",_ext2["default"].runtime.sendMessage({action:"save-in-like-list",data:details},function(response){showSuccessMessage(response,_ext2["default"].i18n.getMessage("context_messageImageSaved"))})}function saveLink(){var details=getShareDetails();details.type="link",_ext2["default"].runtime.sendMessage({action:"save-in-like-list",data:details},function(response){showSuccessMessage(response,_ext2["default"].i18n.getMessage("context_messageWebsiteSaved"))})}function showSuccessMessage(response,message){console.log("RESPONSE",response),document.getElementById("affilinet-webext-success-message").innerText=message,document.getElementById("affilinet-webext-success-message").classList.remove("affilinet-webext-hidden")}function getShareDetails(){return{image:{src:currentImage.src,width:currentImage.width,height:currentImage.height,alt:currentImage.alt,title:currentImage.title},uri:window.location.toString(),hasDeeplink:currentPageHasProgramPartnershipAndDeeplink,pageTitle:document.title,createdAt:+new Date}}function positionHoverImage(boundingEdges){var top=boundingEdges.top+boundingEdges.height+window.pageYOffset-26,left=boundingEdges.left+boundingEdges.width+window.pageXOffset-26;hoverImageContainer.style.top=top+"px",hoverImageContainer.style.left=left+"px"}function showHoverImage(){hoverImageContainer.style.display="block"}function hideHoverImage(){hoverImageContainer.style.display="none"}function onImageMouseEnter(){contextMenuIsOpened||(currentImage=this,positionHoverImage(this.getBoundingClientRect()),showHoverImage())}function onImageMouseLeave(event){return!!(event.toElement&&0===event.toElement.id.search("affilinet-webext")||contextMenuIsOpened)||void hideHoverImage()}function addListenersToAllImages(){for(var images=document.images,i=0;i<images.length;i++)images[i].width>50&&images[i].height>50&&(images[i].addEventListener("mouseenter",onImageMouseEnter),images[i].addEventListener("mouseleave",onImageMouseLeave))}var contextMenuIsOpened=!1,currentImage=null,hoverImageContainer=createHoverImageContainer(),contextMenu=createContextMenu(),currentPageHasProgramPartnershipAndDeeplink=!1;hoverImageContainer.appendChild(contextMenu),hoverImageContainer.addEventListener("click",openContextMenu),contextMenu.addEventListener("click",onContextMenuClick),window.addEventListener("keydown",function(event){"Escape"===event.key&&closeContextMenu()}),_ext2["default"].runtime.sendMessage({action:"hasProgramPartnershipAndDeeplink"},function(response){hasProgramPartnershipAndDeeplink(response)}),addListenersToAllImages(),document.body.appendChild(hoverImageContainer);var target=document.body,observer=new MutationObserver(function(mutations){addListenersToAllImages()}),config={attributes:!1,childList:!0,characterData:!1};observer.observe(target,config)}function detectWordpressPluginAdminPage(){if(window.location.toString().indexOf("wp-admin")>-1){for(var buttons=document.getElementsByClassName("affilinet-browser-extension-open-widgets-page-on-click"),i=0;i<buttons.length;i++)buttons[i].addEventListener("click",function(){_ext2["default"].runtime.sendMessage({action:"open-page",data:{page:"widget"}})});document.addEventListener("affilinet-browser-extension-open-widgets",function(e){var data={page:"widget"};e.detail&&e.detail.widgetId&&(data.page="widget?widgetId="+e.detail.widgetId),_ext2["default"].runtime.sendMessage({action:"open-page",data:data})}),document.getElementsByClassName("wp-admin")[0].classList.add("affilinet-browser-extension-installed")}}var _ext=require("./utils/ext"),_ext2=_interopRequireDefault(_ext),_storage=require("./utils/storage"),_storage2=_interopRequireDefault(_storage);!function(){_storage2["default"].get("disableImageContextMenu",function(result){result.disableImageContextMenu!==!0&&initContextMenu()}),detectWordpressPluginAdminPage()}()},{"./utils/ext":2,"./utils/storage":3}],2:[function(require,module,exports){"use strict";function Extension(){var _this=this;apis.forEach(function(api){_this[api]=null;try{chrome[api]&&(_this[api]=chrome[api])}catch(e){}try{window[api]&&(_this[api]=window[api])}catch(e){}try{browser[api]&&(_this[api]=browser[api])}catch(e){}try{_this.api=browser.extension[api]}catch(e){}});try{browser&&browser.runtime&&(this.runtime=browser.runtime)}catch(e){}try{browser&&browser.browserAction&&(this.browserAction=browser.browserAction)}catch(e){}}var apis=["alarms","bookmarks","browserAction","commands","contextMenus","cookies","downloads","events","extension","extensionTypes","history","i18n","idle","notifications","pageAction","runtime","storage","tabs","webNavigation","webRequest","windows"],ext=new Extension;module.exports=ext},{}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _ext=require("./ext"),_ext2=_interopRequireDefault(_ext),storage=_ext2["default"].storage.local;module.exports=storage},{"./ext":2}]},{},[1]);